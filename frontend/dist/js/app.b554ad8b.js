(function(){"use strict";var t={331:function(t,e,a){a.d(e,{Z:function(){return w}});var o=function(){var t=this,e=t._self._c;return e("el-row",{staticClass:"header-component"},[e("el-col",{staticClass:"navbar__logo-box",attrs:{span:6}},[e("img",{staticClass:"navbar__logo",attrs:{src:"https://www.pegb.tech/img/logo_white.svg?device=a0181b1e2089aab26466010ef3b1062d",alt:""},on:{click:t.onClickLogo}})]),e("el-col",{staticClass:"navbar__menu-box",attrs:{span:6}},[e("ul",{staticClass:"el-menu el-menu--horizontal navbar__menu"},[e("li",{staticClass:"el-menu-item"},[e("router-link",{attrs:{to:"/"}},[t._v("Home")])],1),e("li",{staticClass:"el-menu-item"},[e("router-link",{attrs:{to:"/history"}},[t._v("History")])],1),e("li",{staticClass:"el-menu-item"},[e("router-link",{attrs:{to:"/cart"}},[e("img",{staticStyle:{width:"50px"},attrs:{src:"https://cdn.pixabay.com/photo/2016/12/12/13/23/shopping-cart-1901584_640.png"}})])],1),e("li",{staticClass:"el-menu-item account-setting-box"},[e("ModalLogin")],1)])])],1)},i=[],r=function(){var t=this,e=t._self._c;return e("div",[t.access_token?e("el-popover",{attrs:{trigger:"click"}},[e("el-button",{staticStyle:{width:"100%"},on:{click:t.handleLogout}},[t._v("Logout")]),e("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(t.myInfo))])],1):e("el-button",{on:{click:()=>t.isLogin=!0}},[t._v("Login")]),e("el-dialog",{staticClass:"container",attrs:{visible:t.isLogin,width:"25%"},on:{"update:visible":function(e){t.isLogin=e}}},[e("el-button-group",{staticClass:"login-mode"},[e("el-button",{on:{click:function(e){t.isNewUser=!1}}},[t._v("Login")]),e("el-button",{on:{click:function(e){t.isNewUser=!0}}},[t._v("Register")])],1),t.isVerify?t._e():e("div",[t.isNewUser?e("div",{staticClass:"name"},[e("el-input",{attrs:{name:"Name",autocomplete:"firstName",placeholder:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1):t._e(),e("el-input",{attrs:{type:"email",placeholder:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e("el-input",{attrs:{type:"password",autocomplete:"password",mode:"normal",placeholder:"Password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.isVerify?e("el-input",{attrs:{placeholder:"otp"},model:{value:t.otp,callback:function(e){t.otp=e},expression:"otp"}}):t._e(),e("el-button",{staticClass:"submit",on:{click:()=>t.isVerify?t.handleVerify():t.isNewUser?t.handleRegister():t.handleLogin()}},[t._v("Continue")])],1)],1)},n=[],s=a(669),c=a.n(s);const l=async(t,e)=>{const a="http://localhost/api/users/login",o=await c().post(a,{email:t,password:e});return localStorage.setItem("access_token",o.data.access_token),await u(),o.data.access_token},u=async()=>{const t="http://localhost/api/users/me",e=await c().get(t,{headers:{Authorization:localStorage.getItem("access_token")}});localStorage.setItem("me",JSON.stringify(e.data))},d=async(t,e,a)=>{const o="http://localhost/api/users/register";await c().post(o,{email:t,name:e,password:a})},p=async(t,e)=>{const a="http://localhost/api/users/verify-otp";await c().post(a,{email:t,otp:e})};var m={name:"ModalLogin",data(){return{isLogin:!1,isNewUser:!1,email:"",name:"",password:"",isRegister:!1,access_token:localStorage.getItem("access_token"),isVerify:!1,otp:""}},computed:{wasLogin(){const t=localStorage.getItem("access_token");return!!t},myInfo(){return this.access_token?"Welcome "+JSON.parse(localStorage.getItem("me")).name:"Login"}},methods:{async handleLogin(){this.access_token=await l(this.email,this.password),this.isLogin=!1},async handleLogout(){localStorage.removeItem("access_token"),localStorage.removeItem("me"),this.access_token=void 0},async handleRegister(){await d(this.email,this.name,this.password),this.isVerify=!0},async handleVerify(){await p(this.email,this.otp),this.isVerify=!1,this.$message("Account verified")}}},h=m,v=a(1),g=(0,v.Z)(h,r,n,!1,null,null,null),f=g.exports,y={data(){return{}},props:{isShowSearchBar:{type:Boolean,default:!0}},components:{ModalLogin:f},methods:{handleNavDropdownCommand:function(t){"logout"==t&&this.$confirm("Do you want to logout?","Notification",{confirmButtonText:"Logout",cancelButtonText:"Cancel",type:"warning"}).then(function(){this.$message("Logout successfully")}.bind(this))},goTo(t){this.$router.push({name:t})},onClickLogo(){this.goTo("home")}}},_=y,C=(0,v.Z)(_,o,i,!1,null,"ac79c514",null),w=C.exports},184:function(t,e,a){var o=a(247),i=a.n(o),r=a(144),n=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},s=[],c=a(1),l={},u=(0,c.Z)(l,n,s,!1,null,null,null),d=u.exports,p=a(345),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-page"},[e("header-component"),e("div",{staticClass:"category-title"},[t._v("Category")]),e("div",{staticClass:"product-page-body"},[e("div",{staticClass:"category-container"},t._l(t.productCategories,(function(a,o){return e("div",{key:o,staticClass:"category-item",on:{click:function(e){return t.onHandleClick(a.id)}}},[e("img",{staticClass:"image",attrs:{src:a.image,alt:""}}),e("div",{staticClass:"title"},[t._v(t._s(a.name))])])})),0)])],1)},h=[],v=a(331),g=a(990),f={name:"HomePage",data:function(){return{productCategories:[]}},components:{HeaderComponent:v.Z},mounted(){this.getCategories()},methods:{onHandleClick(t){this.$router.push(`/category/${t}`)},async getCategories(){const t={type:"error",message:"Cannot fetch data"};try{this.productCategories=await(0,g.CP)()}catch(e){console.log({error:e}),this.$message(t)}},onHandleClickAddProduct(){this.$router.push("add-product")}}},y=f,_=(0,c.Z)(y,m,h,!1,null,"3794470a",null),C=_.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-detail-page"},[e("header-component"),e("product-detail",{attrs:{productName:this.productData.name,categoryName:this.productData.categoryName,price:this.productData.price,title:this.productData.title,documentLevel:this.productData.documentLevel,owner:this.productData.owner,status:this.productData.status,documnentSummary:this.productData.identityItemDescription}}),e("product-rating",{attrs:{rating:this.productData.rating}}),t.similarProduct.length>0?e("div",{staticClass:"product-similar"},[e("div",{staticClass:"product-similar-header"},[t._v("Maybe you like")]),e("div",{staticClass:"product-similar-body"},t._l(t.similarProduct,(function(t,a){return e("product-item",{key:a,attrs:{"product-data-overview":t}})})),1)]):t._e()],1)},b=[],k=function(){var t=this,e=t._self._c;return e("div",{staticClass:"product-detail"},[e("div",{staticClass:"product-detail-body"},[e("div",{staticClass:"title"},[t._v("Product Specifications")]),e("div",{staticStyle:{float:"right",width:"50px"},on:{click:()=>t.isEdit=!t.isEdit}},[e("i",{staticClass:"el-icon-edit"})]),e("div",{staticClass:"content"},[e("div",{staticClass:"content-row"},[e("div",{staticClass:"col-1"},[t._v("Category")]),e("div",{staticClass:"col-2"},[e("el-breadcrumb-item",[t._v(t._s(t.productName))])],1)]),e("div",{staticClass:"content-row"},[e("div",{staticClass:"col-1"},[t._v("Stock")]),e("div",{staticClass:"col-2"},[t._v(t._s(t.quantity))])]),e("div",{staticClass:"content-row"},[e("div",{staticClass:"col-1"},[t._v("Price")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.newPrice,expression:"newPrice"}],staticClass:"col-2",domProps:{value:t.newPrice},on:{input:function(e){e.target.composing||(t.newPrice=e.target.value)}}}):e("div",{staticClass:"col-2"},[t._v(t._s(t.price))])])]),t._m(0),t.isEdit?e("div",{staticClass:"save-btn"},[e("el-button",{on:{click:t.handleUpdate}},[t._v("Save")])],1):t._e()])])},S=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"documentation"},[e("div",{staticClass:"documentation-title"},[t._v("Product Documentation")]),e("span",{staticStyle:{margin:"30px"}},[t._v("Some documents...")])])}],P={props:{productName:{type:String,default:"Some category"},categoryName:{type:String,default:"Category"},quantity:{type:String,default:"21"},price:{type:Number,default:null}},data(){return{isEdit:!1,newPrice:this.price}},methods:{async handleUpdate(){const t=this.$route.path.split("/")[2];await(0,g.nM)(t,{price:this.newPrice}),window.location.reload(!0)}}},I=P,x=(0,c.Z)(I,k,S,!1,null,null,null),N=x.exports,O={name:"ProductDetailPage",data(){return{productData:{},similarProduct:[],noDataImage:a(279)}},components:{HeaderComponent:v.Z,ProductDetail:N},methods:{async getProductDetail(t){this.productData=await(0,g.gk)(t)}},mounted(){const t=this.$route.path.split("/")[2];this.getProductDetail(t)}},D=O,L=(0,c.Z)(D,w,b,!1,null,"4c5ca95a",null),A=L.exports,$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("header-component"),e("div",{staticStyle:{display:"flex",margin:"5%"}},t._l(t.products,(function(t,a){return e("product-item",{key:a,attrs:{"product-data-overview":t}})})),1)],1)},T=[],Z=function(){var t=this,e=t._self._c;return e("div",[t.isCartPage?t._e():e("button",{staticClass:"product-item",staticStyle:{width:"230px"},on:{click:t.handleAddToCart}},[e("i",{staticClass:"el-icon-plus",staticStyle:{"margin-left":"50%"}})]),e("div",{staticClass:"product-item",on:{click:t.onClickProductItem}},[t.imageSrc?e("img",{staticClass:"product-image",attrs:{src:t.imageSrc,alt:""}}):e("img",{staticClass:"product-image",attrs:{src:a(279),alt:""}}),e("div",{staticClass:"product-name"},[t._v(" "+t._s(t.productDataOverview.name)+" ")]),e("div",{staticClass:"product-id"},[t._v(" Id: "+t._s(t.productDataOverview.id||t.productId)+" ")]),e("div",{staticClass:"product-price"},[t._v(" $"+t._s(t.productDataOverview.price||t.productPrice)+" ")]),e("div",{staticClass:"product-star"},[e("el-rate",{attrs:{max:5},model:{value:t.overviewStar,callback:function(e){t.overviewStar=e},expression:"overviewStar"}})],1),e("div",{staticClass:"product-quantity"},[t._v(" Quantity: "+t._s(t.productDataOverview.partnerItemQty||t.productQuantity)+" ")]),e("div",{staticClass:"product-location"},[t._v(" "+t._s(t.productLocation)+" ")])])])},E=[],H={data(){return{overviewStar:this.productStar}},props:{imageSrc:{type:String,default:""},productName:{type:String,default:""},productId:{type:String,default:"0"},productPrice:{type:String,default:"4.99"},productStar:{type:Number,default:4.9},productQuantity:{type:String,default:"16.2k"},productLocation:{type:String,default:"VN"},productDataOverview:{type:Object,default:()=>{}},isCartPage:{type:Boolean,default:!1}},methods:{onClickProductItem(){const t=`/product/${this.productDataOverview.id}`;this.$route.path!==t&&(this.$router.push(t),window.location.reload())},handleAddToCart(){const t=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],e=t.find((t=>t.id==this.productDataOverview.id));e?this.$message("Already in cart"):(t.push(this.productDataOverview),localStorage.setItem("cart",JSON.stringify(t)),this.$message("Added to cart"))}}},j=H,M=(0,c.Z)(j,Z,E,!1,null,null,null),U=M.exports,V={data(){return{categoryId:1,products:[]}},components:{ProductItem:U,HeaderComponent:v.Z},methods:{async getAllProduct(){this.products=await(0,g.Xp)(this.categoryId)}},mounted(){this.categoryId=decodeURIComponent(this.$route.path.split("/")[2]),this.getAllProduct()}},B=V,z=(0,c.Z)(B,$,T,!1,null,null,null),q=z.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("header-component"),e("div",[t.transactionInfo?e("div",{staticClass:"transaction"},[t._l(t.transactionInfo.product_price_detail,(function(a,o){return e("div",{key:o,staticClass:"discount_detail"},[e("div",[t._v("Name: "+t._s(a.product_name))]),e("div",{staticClass:"origin_price"},[t._v("Original price: "+t._s(a.original_price))]),e("div",[t._v("Discount price: "+t._s(a.discount_price))])])})),e("div",{staticClass:"transaction_info"},[e("div",[t._v("Total: "+t._s(t.transactionInfo.product_discount_price))]),e("div",[t._v("Sale off for "+t._s(t.transactionInfo.user_rank)+" user: "+t._s(t.transactionInfo.user_discount_price))])])],2):e("div",{staticStyle:{display:"flex",margin:"5%"}},t._l(t.products,(function(t,a){return e("product-item",{key:a,attrs:{"is-cart-page":!0,"product-data-overview":t}})})),1)]),t.transactionInfo?e("div"):t._e(),this.products.length?e("el-button",{on:{click:t.handlePurchase}},[t._v("Purchase")]):e("div",[t._v("Please add product to cart")])],1)},R=[],F=a(669),Q=a.n(F);const X=async t=>{const e="http://localhost/api/orders/make",a=await Q().post(e,{product_ids:t},{headers:{Authorization:localStorage.getItem("access_token")}});return a.data},K=async()=>{const t="http://localhost/api/orders/history",e=await Q().get(t,{headers:{Authorization:localStorage.getItem("access_token")}});return e.data};var W={data(){return{products:[],transactionInfo:null}},components:{ProductItem:U,HeaderComponent:v.Z},methods:{getAllProductCart(){this.products=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]},async handlePurchase(){localStorage.getItem("access_token")?this.transactionInfo=await X(this.products.map((t=>t.id))):this.$message("Please login to continue")}},mounted(){this.getAllProductCart()}},G=W,Y=(0,c.Z)(G,J,R,!1,null,null,null),tt=Y.exports,et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("header-component"),e("h1",{staticStyle:{"font-size":"30px"}},[t._v("Order History")]),t._l(t.histories,(function(a,o){return e("div",{key:o,staticClass:"history"},[e("div",[t._v("Id: "+t._s(a.id))]),e("div",[t._v("Status: "+t._s(a.status))]),e("div",[t._v("Total price: "+t._s(a.total_amount))])])}))],2)},at=[],ot={data(){return{histories:[]}},components:{HeaderComponent:v.Z},methods:{async getOrderHistory(){this.histories=await K(),console.log("🚀 ~ getOrderHistory ~ this.histories:",this.histories)}},mounted(){this.getOrderHistory()}},it=ot,rt=(0,c.Z)(it,et,at,!1,null,null,null),nt=rt.exports;r["default"].use(p.ZP);const st=[{path:"/",name:"home",component:C},{path:"/product/:productName",name:"productDetail",component:A},{path:"/cart",name:"cart",component:tt},{path:"/add-product",name:"addProduct",component:()=>a.e(122).then(a.bind(a,122))},{path:"/category/:id",name:"category",component:q},{path:"/history",name:"history",component:nt},{path:"*",redirect:"/"}],ct=new p.ZP({mode:"history",routes:st});var lt=ct;r["default"].config.productionTip=!1,r["default"].use(i()),new r["default"]({router:lt,render:t=>t(d)}).$mount("#app")},990:function(t,e,a){a.d(e,{CP:function(){return s},Xp:function(){return r},gk:function(){return n},nM:function(){return c}});var o=a(669),i=a.n(o);const r=async t=>{const e="http://localhost/api/products/category/"+t,a=await i().get(e);return a.data},n=async t=>{const e="http://localhost/api/products/"+t,a=await i().get(e);return a.data},s=async()=>{const t="http://localhost/api/categories",e=await i().get(t);return e.data},c=(t,e)=>{const a="http://localhost/api/products/"+t;return i().patch(a,e,{headers:{Authorization:localStorage.getItem("access_token")}})}},279:function(t,e,a){t.exports=a.p+"img/No_Image_Available.fd92472a.jpg"}},e={};function a(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,o,i,r){if(!o){var n=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],r=t[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&r||n>=r)&&Object.keys(a.O).every((function(t){return a.O[t](o[c])}))?o.splice(c--,1):(s=!1,r<n&&(n=r));if(s){t.splice(u--,1);var l=i();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,o){return a.f[o](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".2d147ebc.js"}}(),function(){a.miniCssF=function(t){return"css/"+t+".35527e98.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="frontend:";a.l=function(o,i,r,n){if(t[o])t[o].push(i);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==e+r){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",e+r),s.src=o),t[o]=[i];var p=function(e,a){s.onerror=s.onload=null,clearTimeout(m);var i=t[o];if(delete t[o],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t=function(t,e,a,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var r=function(r){if(i.onerror=i.onload=null,"load"===r.type)a();else{var n=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=s,i.parentNode.removeChild(i),o(c)}};return i.onerror=i.onload=r,i.href=e,document.head.appendChild(i),i},e=function(t,e){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var i=a[o],r=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(r===t||r===e))return i}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){i=n[o],r=i.getAttribute("data-href");if(r===t||r===e)return i}},o=function(o){return new Promise((function(i,r){var n=a.miniCssF(o),s=a.p+n;if(e(n,s))return i();t(o,s,i,r)}))},i={143:0};a.f.miniCss=function(t,e){var a={122:1};i[t]?e.push(i[t]):0!==i[t]&&a[t]&&e.push(i[t]=o(t).then((function(){i[t]=0}),(function(e){throw delete i[t],e})))}}(),function(){var t={143:0};a.f.j=function(e,o){var i=a.o(t,e)?t[e]:void 0;if(0!==i)if(i)o.push(i[2]);else{var r=new Promise((function(a,o){i=t[e]=[a,o]}));o.push(i[2]=r);var n=a.p+a.u(e),s=new Error,c=function(o){if(a.o(t,e)&&(i=t[e],0!==i&&(t[e]=void 0),i)){var r=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+n+")",s.name="ChunkLoadError",s.type=r,s.request=n,i[1](s)}};a.l(n,c,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,n=o[0],s=o[1],c=o[2],l=0;if(n.some((function(e){return 0!==t[e]}))){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(c)var u=c(a)}for(e&&e(o);l<n.length;l++)r=n[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(184)}));o=a.O(o)})();
//# sourceMappingURL=app.b554ad8b.js.map